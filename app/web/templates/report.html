{% extends "base.html" %}

{% block title %}Evident — {{ video_title or run_id }}{% endblock %}

{% block content %}
<h1>Video Fact-check Report</h1>

<!-- Rendered report -->
<article class="report-content">
    <p>
        <strong>Video Title:</strong> {{ video_title or '—' }}<br>
        <strong>Channel:</strong> {{ channel or '—' }}<br>
        <strong>ID:</strong> <code>{{ run_id }}</code>
        &mdash;
        <strong>Date:</strong> {{ run_date or '—' }}
    </p>
    {{ report_html | safe }}
</article>

<!-- Download links -->
<details style="margin-bottom:1rem; background-color:#f4f4f4; padding:1em; border-radius:0.3em;">
    <summary>Download Artifacts</summary>
    <div style="display:flex; gap:0.5rem; flex-wrap:wrap; margin-top:0.5rem;">
        {% set artifacts = manifest.get('artifacts', {}) %}
        {% if artifacts.get('writer_md') %}
        <a href="/run/{{ run_id }}/artifact/{{ artifacts.writer_md }}" role="button" class="outline" style="font-size:0.85em;">
            Report (.md)
        </a>
        {% endif %}
        {% if artifacts.get('verdicts') %}
        <a href="/run/{{ run_id }}/artifact/{{ artifacts.verdicts }}" role="button" class="outline" style="font-size:0.85em;">
            Verdicts (.json)
        </a>
        {% endif %}
        {% if artifacts.get('sources') %}
        <a href="/run/{{ run_id }}/artifact/{{ artifacts.sources }}" role="button" class="outline" style="font-size:0.85em;">
            Sources (.json)
        </a>
        {% endif %}
        {% if artifacts.get('scorecard_md') %}
        <a href="/run/{{ run_id }}/artifact/{{ artifacts.scorecard_md }}" role="button" class="outline" style="font-size:0.85em;">
            Scorecard (.md)
        </a>
        {% endif %}
        {% if artifacts.get('claims') %}
        <a href="/run/{{ run_id }}/artifact/{{ artifacts.claims }}" role="button" class="outline" style="font-size:0.85em;">
            Claims (.json)
        </a>
        {% endif %}
        <a href="/run/{{ run_id }}/artifact/run.json" role="button" class="outline" style="font-size:0.85em;">
            Manifest (.json)
        </a>
    </div>
</details>

<!-- Navigation -->
<div style="margin-top:2rem; display:flex; gap:1rem;">
    <a href="/" role="button" class="outline">Start New</a>
    <a href="/runs" role="button" class="outline secondary">History</a>
</div>
{% endblock %}
